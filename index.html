<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IAU অ্যাসাইনমেন্ট কভার পেজ</title>
<!-- PDF এবং ফন্ট লাইব্রেরি -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
  body {
    font-family: 'Hind Siliguri', Arial, sans-serif;
    background-color: #e0e5ec;
    margin: 0;
    padding: 20px;
  }

  /* ইনপুট ফর্ম ডিজাইন */
  .input-section {
    background: #ffffff;
    padding: 35px;
    border-radius: 15px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    max-width: 900px;
    margin: 0 auto 40px auto;
    border-top: 5px solid #006400;
  }
  .input-section h3 {
    color: #006400;
    border-bottom: 2px dashed #ccc;
    padding-bottom: 10px;
    margin-bottom: 25px;
    margin-top: 0;
    font-size: 22px;
  }
  .input-section h4 {
    background: #f1f8e9;
    padding: 8px 12px;
    border-left: 4px solid #006400;
    color: #333;
    margin-bottom: 20px;
    border-radius: 0 4px 4px 0;
  }

  .input-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
  }
  .input-full { grid-column: span 2; }
  
  .input-group label {
    display: block;
    font-weight: 600;
    margin-bottom: 8px;
    color: #444;
    font-size: 15px;
  }
  .input-group input, .input-group select {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid #ddd;
    border-radius: 8px;
    font-family: 'Hind Siliguri', sans-serif;
    font-size: 16px;
    box-sizing: border-box;
    transition: all 0.3s;
    background: #fafafa;
  }
  .input-group input:focus, .input-group select:focus {
    border-color: #006400;
    background: #fff;
    outline: none;
    box-shadow: 0 0 0 3px rgba(0,100,0,0.1);
  }
  input[readonly] { background-color: #eee; cursor: not-allowed; color: #666; }

  /* জেনারেট বাটন */
  button#gen-btn {
    background: linear-gradient(135deg, #006400 0%, #004d00 100%);
    color: white;
    padding: 16px;
    border: none;
    border-radius: 10px;
    width: 100%;
    font-size: 18px;
    font-weight: 700;
    cursor: pointer;
    margin-top: 30px;
    font-family: 'Hind Siliguri', sans-serif;
    box-shadow: 0 4px 15px rgba(0,100,0,0.3);
    transition: transform 0.2s, box-shadow 0.2s;
  }
  button#gen-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,100,0,0.4); }

  /* PDF প্রিভিউ এরিয়া */
  #pdf-preview-container {
    background: #525659;
    padding: 60px 20px;
    overflow-x: auto;
    display: flex;
    justify-content: center;
    border-radius: 8px;
  }

  /* মূল A4 পেজ */
  #cover-page {
    width: 210mm;
    height: 297mm;
    background: white;
    padding: 10mm;
    box-sizing: border-box;
    position: relative;
    color: #000;
    font-family: 'Hind Siliguri', sans-serif;
    box-shadow: 0 0 20px rgba(0,0,0,0.5);
  }

  /* ডিজাইন বর্ডার (Double Border) */
  .page-border {
    width: 100%;
    height: 100%;
    border: 2px solid #000;
    padding: 3px;
    box-sizing: border-box;
    border-radius: 5px;
  }
  .inner-border {
    width: 100%;
    height: 100%;
    border: 1px solid #000;
    padding: 10mm 15mm;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    align-items: center;
    border-radius: 3px;
  }

  /* হেডার ডিজাইন */
  .header-section { text-align: center; width: 100%; margin-bottom: 10px; }
  
  /* বিসমিল্লাহ ইমেজ স্টাইল */
  .bismillah-img { 
    width: 150px;
    height: auto;
    margin-bottom: 10px; 
    display: block;
    margin-left: auto;
    margin-right: auto;
  }
  
  .uni-logo { width: 100px; height: auto; margin: 0 auto 10px auto; display: block; }
  
  .uni-name {
    font-size: 30px;
    font-weight: 700;
    color: #006400;
    line-height: 1.2;
    margin-top: 5px;
    text-shadow: 0px 0px 1px rgba(0,100,0,0.1);
  }
  
  .affiliation { 
    font-size: 16px; 
    margin: 5px 0; 
    font-weight: 500;
    letter-spacing: 1px;
  }

  /* ডাইনামিক মাদ্রাসার নাম */
  .madrasa-name {
    font-size: 26px;
    font-weight: 700;
    color: #1a1a1a;
    margin-top: 5px;
    line-height: 1.3;
  }
  .madrasa-address { 
    font-size: 16px; 
    margin-bottom: 15px; 
    color: #444; 
  }

  /* অ্যাসাইনমেন্ট বক্স */
  .assignment-box-container {
    width: 100%;
    text-align: center;
    margin: 10px 0 25px 0;
  }
  .assignment-box {
    border: 2px solid #000;
    padding: 8px 50px;
    font-size: 26px;
    font-weight: 700;
    border-radius: 8px;
    background: #fff;
    display: inline-block;
    box-shadow: 3px 3px 0px rgba(0,0,0,0.1);
    text-transform: uppercase;
    letter-spacing: 2px;
  }

  /* তথ্যের সারি (ডটেড লাইন) - ফন্ট ছোট করা হয়েছে */
  .info-line {
    display: flex;
    width: 100%;
    margin-bottom: 10px; /* মার্জিন কমানো হয়েছে */
    align-items: flex-end;
    font-size: 16px; /* 19px থেকে কমিয়ে 16px করা হয়েছে */
    line-height: 1.4;
  }
  .label {
    font-weight: 700;
    white-space: nowrap;
    margin-right: 10px;
    flex-shrink: 0;
    min-width: 60px;
  }
  
  /* বিষয় সেকশন */
  .subject-section { 
    width: 100%; 
    margin-bottom: 20px; 
    padding: 0 10px;
  }

  /* ডিটেইলস কন্টেইনার */
  .details-container {
    display: flex;
    flex-direction: column;
    width: 100%;
    gap: 25px; /* গ্যাপ কমানো হয়েছে */
    margin-top: 5px;
  }
  
  .details-col {
    width: 100%;
    display: flex;
    flex-direction: column;
  }

  .col-header {
    text-align: left;
    font-weight: 700;
    font-size: 18px; /* 20px থেকে কমিয়ে 18px */
    margin-bottom: 12px;
    border-bottom: 2px solid #000;
    display: inline-block;
    padding-bottom: 4px;
    width: 100%;
  }

  /* রচনায় অংশের জন্য লেবেল উইডথ ফিক্স */
  .details-col .label {
    min-width: 100px;
  }

  .value-area {
    flex-grow: 1;
    border-bottom: 1px dotted #000;
    font-weight: 500;
    padding-left: 10px;
    position: relative;
    top: -4px;
    min-height: 22px; /* হাইট কমানো হয়েছে */
  }

  /* ফুটার */
  .footer-section {
    margin-top: auto;
    width: 100%;
    text-align: center;
    font-size: 15px; /* 17px থেকে কমিয়ে 15px */
    font-weight: 700;
    padding-top: 20px;
  }

  /* প্রিন্ট ও মোবাইল রেসপন্সিভনেস */
  @media (max-width: 600px) {
    .input-grid { grid-template-columns: 1fr; }
    .input-full { grid-column: span 1; }
    #cover-page { width: 100%; height: auto; padding: 0; }
    .page-border { border: none; padding: 0; }
    .inner-border { border: none; padding: 10px; }
    .details-container { gap: 30px; }
    .assignment-box { font-size: 20px; padding: 5px 30px; }
    .uni-name { font-size: 22px; }
  }
</style>
</head>
<body>

<div class="input-section">
  <h3>প্রতিষ্ঠান ও অ্যাসাইনমেন্ট তথ্য</h3>

  <div class="input-grid">
    <div class="input-group input-full">
      <label>মাদ্রাসার নাম:</label>
      <input type="text" id="in-madrasa" placeholder="উদাহরণ: জামেয়া আহমদিয়া সুন্নিয়া কামিল মাদ্রাসা" oninput="updatePreview()">
    </div>
    <div class="input-group input-full">
      <label>মাদ্রাসার ঠিকানা:</label>
      <input type="text" id="in-address" placeholder="উদাহরণ: ষোলশহর, পাঁচলাইশ, চট্টগ্রাম" oninput="updatePreview()">
    </div>
  </div>

  <h4>কোর্সের বিবরণ</h4>
  <div class="input-grid">
    <div class="input-group input-full">
      <label>অ্যাসাইনমেন্ট শিরোনাম:</label>
      <input type="text" id="in-title" placeholder="বিষয়..." oninput="updatePreview()">
    </div>
    <div class="input-group">
      <label>কোর্স শিরোনাম:</label>
      <input type="text" id="in-course" oninput="updatePreview()">
    </div>
    <div class="input-group">
      <label>কোর্স কোড:</label>
      <input type="text" id="in-code" oninput="updatePreview()">
    </div>
  </div>

  <div class="input-grid">
    <!-- শিক্ষক -->
    <div class="input-full"><h4>শিক্ষকের তথ্য (নির্দেশনায়)</h4></div>
    <div class="input-group">
      <label>শিক্ষকের নাম:</label>
      <input type="text" id="in-tname" oninput="updatePreview()">
    </div>
    <div class="input-group">
      <label>শিক্ষকের পদবি:</label>
      <input type="text" id="in-desig" oninput="updatePreview()">
    </div>

    <!-- শিক্ষার্থী -->
    <div class="input-full"><h4>শিক্ষার্থীর তথ্য (রচনায়)</h4></div>
    <div class="input-group">
      <label>নাম:</label>
      <input type="text" id="in-sname" oninput="updatePreview()">
    </div>
    <div class="input-group">
      <label>রেজিঃ নং:</label>
      <input type="text" id="in-reg" oninput="updatePreview()">
    </div>
    <div class="input-group">
      <label>শ্রেণি (ফিক্সড):</label>
      <input type="text" id="in-class" value="কামিল (স্নাতকোত্তর)" readonly>
    </div>
    <div class="input-group">
      <label>পর্ব:</label>
      <select id="in-part" onchange="updatePreview()">
        <option value="১ম পর্ব">১ম পর্ব</option>
        <option value="২য় পর্ব">২য় পর্ব</option>
      </select>
    </div>
    <div class="input-group">
      <label>বিভাগ:</label>
      <select id="in-dept" onchange="updatePreview()">
        <option value="আল হাদিস">আল হাদিস</option>
        <option value="আত তাফসির">আত তাফসির</option>
        <option value="আল ফিকহ">আল ফিকহ</option>
        <option value="আল আদাব">আল আদাব</option>
      </select>
    </div>
    <div class="input-group">
      <label>সেশন:</label>
      <input type="text" id="in-session" placeholder="২০২৪-২০২৫" oninput="updatePreview()">
    </div>
    <div class="input-group">
      <label>পরীক্ষার বছর:</label>
      <input type="text" id="in-exam-year" placeholder="২০২৫" oninput="updatePreview()">
    </div>
    <div class="input-group">
      <label>জমাদানের তারিখ:</label>
      <input type="date" id="in-date" onchange="updatePreview()">
    </div>
  </div>

  <button id="gen-btn" onclick="generatePDF()">PDF ডাউনলোড করুন</button>
</div>

<!-- প্রিভিউ এরিয়া (A4 ডকুমেন্ট) -->
<div id="pdf-preview-container">
  <div id="cover-page">
    <div class="page-border">
      <div class="inner-border">
      
        <!-- হেডার -->
        <div class="header-section">
          <!-- বিসমিল্লাহ ইমেজ -->
          <img src="bismillah.png" class="bismillah-img" alt="Bismillah" crossorigin="anonymous">
          
          <img src="iau-logo.png" class="uni-logo" id="main-logo" alt="Logo" crossorigin="anonymous">
          
          <div class="uni-name">ইসলামি আরবি বিশ্ববিদ্যালয়, ঢাকা</div>
          <div class="affiliation">এর অধিভুক্ত</div>

          <div class="madrasa-name" id="out-madrasa">মাদ্রাসার নাম...</div>
          <div class="madrasa-address" id="out-address">মাদ্রাসার ঠিকানা...</div>
        </div>

        <!-- অ্যাসাইনমেন্ট বক্স -->
        <div class="assignment-box-container">
          <div class="assignment-box">অ্যাসাইনমেন্ট</div>
        </div>

        <!-- বিষয় ও কোর্স -->
        <div class="subject-section">
          <div class="info-line">
            <span class="label">অ্যাসাইনমেন্ট শিরোনাম:</span>
            <span class="value-area" id="out-title"></span>
          </div>
          <div class="info-line">
            <span class="label">কোর্স শিরোনাম:</span>
            <span class="value-area" id="out-course"></span>
          </div>
          <div class="info-line">
            <span class="label">কোর্স কোড:</span>
            <span class="value-area" id="out-code"></span>
          </div>
        </div>

        <!-- মেইন কনটেন্ট (উপরে-নিচে) -->
        <div class="details-container">
          <!-- উপরে: নির্দেশনায় -->
          <div class="details-col">
            <div class="col-header">নির্দেশনায়</div>
            <div class="info-line">
              <span class="label">শিক্ষকের নাম:</span>
              <span class="value-area" id="out-tname"></span>
            </div>
            <div class="info-line">
              <span class="label">পদবি:</span>
              <span class="value-area" id="out-desig"></span>
            </div>
          </div>

          <!-- নিচে: রচনায় -->
          <div class="details-col">
            <div class="col-header">রচনায়</div>
            <div class="info-line">
              <span class="label">নাম:</span>
              <span class="value-area" id="out-sname"></span>
            </div>
            <div class="info-line">
              <span class="label">রেজিঃ নং:</span>
              <span class="value-area" id="out-reg"></span>
            </div>
            <div class="info-line">
              <span class="label">শ্রেণি:</span>
              <span class="value-area" id="out-class">কামিল (স্নাতকোত্তর)</span>
            </div>
            <div class="info-line">
              <span class="label">পর্ব:</span>
              <span class="value-area" id="out-part">১ম পর্ব</span>
            </div>
            <div class="info-line">
              <span class="label">বিভাগ:</span>
              <span class="value-area" id="out-dept">আল হাদিস</span>
            </div>
            <div class="info-line">
              <span class="label">সেশন:</span>
              <span class="value-area" id="out-session"></span>
            </div>
            <div class="info-line">
              <span class="label">পরীক্ষার বছর:</span>
              <span class="value-area" id="out-exam-year"></span>
            </div>
          </div>
        </div>

        <!-- ফুটার -->
        <div class="footer-section">
          জমাদানের তারিখ: <span id="out-date">../../....</span> খ্রি.
        </div>
      
      </div> <!-- End Inner Border -->
    </div> <!-- End Page Border -->
  </div>
</div>

<script>
  // বাংলা সংখ্যা কনভার্টার
  function toBanglaNum(str) {
    if(!str) return "";
    const numbers = { '0':'০','1':'১','2':'২','3':'৩','4':'৪','5':'৫','6':'৬','7':'৭','8':'৮','9':'৯' };
    return String(str).replace(/[0-9]/g, match => numbers[match]);
  }

  function updatePreview() {
    const ids = ['madrasa', 'address', 'title', 'course', 'code', 'tname', 'desig', 'sname', 'reg', 'session', 'exam-year'];
    
    // টেক্সট ফিল্ড আপডেট
    ids.forEach(id => {
      document.getElementById('out-' + id).innerText = document.getElementById('in-' + id).value;
    });

    // ফিক্সড/সিলেক্ট ফিল্ড আপডেট
    document.getElementById('out-class').innerText = document.getElementById('in-class').value;
    document.getElementById('out-part').innerText = document.getElementById('in-part').value;
    document.getElementById('out-dept').innerText = document.getElementById('in-dept').value;

    // তারিখ আপডেট
    const dateInput = document.getElementById('in-date').value;
    if(dateInput) {
      const parts = dateInput.split("-");
      const formatted = `${toBanglaNum(parts[2])}/${toBanglaNum(parts[1])}/${toBanglaNum(parts[0])}`;
      document.getElementById('out-date').innerText = formatted;
    } else {
      document.getElementById('out-date').innerText = "../../....";
    }
  }

  async function generatePDF() {
    const { jsPDF } = window.jspdf;
    const element = document.getElementById('cover-page');
    const btn = document.getElementById('gen-btn');
    const originalText = btn.innerText;

    btn.innerText = "প্রসেসিং হচ্ছে...";
    btn.disabled = true;

    try {
      // PDF এর জন্য হাই রেজুলেশন সেটিংস
      const canvas = await html2canvas(element, {
        scale: 2, 
        useCORS: true, 
        allowTaint: true
      });

      const imgData = canvas.toDataURL('image/png');
      const pdf = new jsPDF('p', 'mm', 'a4');
      const pdfWidth = pdf.internal.pageSize.getWidth();
      const pdfHeight = pdf.internal.pageSize.getHeight();
      
      pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
      pdf.save('IAU_Assignment_Cover.pdf');
    } catch (error) {
      console.error(error);
      alert("দুঃখিত, সমস্যা হয়েছে। দয়া করে আবার চেষ্টা করুন।");
    } finally {
      btn.innerText = originalText;
      btn.disabled = false;
    }
  }
</script>

</body>
</html>
